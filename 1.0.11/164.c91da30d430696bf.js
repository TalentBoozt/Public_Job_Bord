"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[164],{1164:(yt,h,s)=>{s.r(h),s.d(h,{ProDashboardModule:()=>Zt});var p=s(6895),m=s(1779),M=s(2711),P=s(5861),t=s(4650),v=s(4416),w=s(6196),b=s(8157),g=s(3378),f=s(1572),_=s(3937),A=s(927),Z=s(6391),C=s(9865),y=s(3695);function U(i,r){if(1&i&&(t.TgZ(0,"div",1)(1,"div",26)(2,"div",19)(3,"div",27),t._uU(4),t.qZA(),t.TgZ(5,"div",28)(6,"div")(7,"p",23),t._uU(8),t.ALo(9,"timeAgo"),t.qZA(),t.TgZ(10,"p",23),t._uU(11),t.ALo(12,"date"),t.qZA()(),t.TgZ(13,"div")(14,"p",23),t._uU(15),t.qZA(),t.TgZ(16,"p",23),t._uU(17),t.qZA()()()()()()),2&i){const e=r.$implicit,o=t.oxw();t.xp6(3),t.MGl("routerLink","/job-details/",e.id,""),t.xp6(1),t.Oqu(e.title),t.xp6(4),t.hij("Posted: ",t.lcZ(9,6,e.datePosted),""),t.xp6(3),t.hij("Expired: ",t.lcZ(12,8,e.expiryDate),""),t.xp6(4),t.hij("",o.getViews(e.id)," Views"),t.xp6(2),t.hij("",o.getApplicants(e.id)," Applicants")}}function j(i,r){1&i&&(t.TgZ(0,"p"),t._uU(1,"Currently you do not have any shared ads"),t.qZA())}function O(i,r){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-failed-to-load-data"),t.qZA())}function k(i,r){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-result-not-found"),t.qZA())}function J(i,r){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-network-error"),t.qZA())}function q(i,r){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-forbidden"),t.qZA())}let S=(()=>{class i{constructor(e,o,n,a){this.employeeService=e,this.companyService=o,this.jobApplyService=n,this.cookieService=a,this.progressValue=50,this.progressMode="determinate",this.personalProgressValue=8,this.personalProgressMode="determinate",this.applicants=[],this.filteredApplicants=[],this.views=[],this.filteredViews=[],this.applicantsMap={},this.viewsMap={},this.jobPosts=[],this.loading=!1,this.serverError=!1,this.notFound=!1,this.forbidden=!1,this.corsError=!1,this.unexpectedError=!1,this.cname="",this.cemail="",this.cphone="",this.chq="",this.formLocked=!0}ngOnInit(){var e=this;return(0,P.Z)(function*(){e.employeeId=e.cookieService.userID(),e.companyId=e.cookieService.organization(),e.getEmployee(e.employeeId),e.getCompany(e.companyId),e.fetchJobPostData()})()}ngAfterViewInit(){document.querySelectorAll(".material-icons").forEach(o=>{o.setAttribute("translate","no")})}getEmployee(e){this.loading=!0,this.employeeService.fetchFullEmployee(e).subscribe(o=>{this.employee=o,this.calculateProfileProgress(this.employee?.employee,"employer")},o=>{404===o.status?this.notFound=!0:500===o.status?this.serverError=!0:0===o.status?this.corsError=!0:403===o.status?this.forbidden=!0:this.unexpectedError=!0,this.loading=!1})}getCompany(e){this.loading=!0,this.companyService.fetchFullCompany(e).subscribe(o=>{this.company=o,this.jobPosts=o?.postedJobs[0]?.postedJobs,this.calculateProfileProgress(o?.company,"company"),this.cname=this.company?.company?.name,this.cemail=this.company?.company?.contactEmail,this.cphone=this.company?.company?.contactNumber,this.chq=this.company?.company?.location,this.cname&&this.cemail&&this.cphone&&this.chq&&(this.formLocked=!1),this.loading=!1},o=>{if(404===o.status)return this.notFound=!0,void location.reload();500===o.status?this.serverError=!0:0===o.status?this.corsError=!0:403===o.status?this.forbidden=!0:this.unexpectedError=!0,this.loading=!1})}calculateProfileProgress(e,o){if(this.loading=!1,!e||!e.profileCompleted)return this.progressValue=0,void(this.personalProgressValue=0);const n=e.profileCompleted;if("object"!=typeof n||null===n)return this.progressValue=0,void(this.personalProgressValue=0);const a=Object.values(n),l=a.length,c=a.filter(Ct=>!0===Ct).length;"employer"===o?this.personalProgressValue=Math.round(c/l*100):"company"===o&&(this.progressValue=Math.round(c/l*100))}fetchJobPostData(){this.jobApplyService.fetchJobApply().subscribe(e=>{e?.forEach(o=>{this.applicantsMap[o.jobId]=o.applicants?.length||0,this.viewsMap[o.jobId]=o.viewers?.length||0})},e=>{console.log(e)})}getApplicants(e){return this.applicantsMap[e]||0}getViews(e){return this.viewsMap[e]||0}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(v.G),t.Y36(w.J),t.Y36(b.v),t.Y36(g.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-pro-main-db"]],decls:80,vars:19,consts:[[1,"container"],[1,"row"],[1,"col-12","col-md-6"],[1,"h2-1","mt-5"],[1,"h2-2"],[1,"d-flex","align-items-center","justify-content-center","w-100","my-5","c-j-progress"],["title","Company Name",1,"check-ball",3,"ngClass"],[1,"material-icons"],[1,"tag"],[1,"check-line"],["title","Company Email",1,"check-ball",3,"ngClass"],["title","Company Phone",1,"check-ball",3,"ngClass"],["title","Head Quarter",1,"check-ball",3,"ngClass"],["title","Ready to go",1,"check-ball","ready",3,"ngClass"],[1,"notification-area"],[1,"not-title-1"],[1,"not-title-2"],[1,"w-100","d-flex","align-items-center","justify-content-end"],[1,"col","col-lg-8"],[1,"card-1"],[1,"d-flex","align-items-center","justify-content-around","justify-content-md-between"],[1,"progress-spinner",3,"mode","value"],[1,"title-1"],[1,"m-0"],["class","row",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-12"],[1,"title-2",3,"routerLink"],[1,"d-flex","align-items-center","justify-content-between"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4,"Hi,"),t.qZA(),t.TgZ(5,"h2",4),t._uU(6),t.qZA(),t.TgZ(7,"div",5)(8,"div",6)(9,"i",7),t._uU(10,"check"),t.qZA(),t.TgZ(11,"div",8),t._uU(12,"Name"),t.qZA()(),t._UZ(13,"div",9),t.TgZ(14,"div",10)(15,"i",7),t._uU(16,"check"),t.qZA(),t.TgZ(17,"div",8),t._uU(18,"Email"),t.qZA()(),t._UZ(19,"div",9),t.TgZ(20,"div",11)(21,"i",7),t._uU(22,"check"),t.qZA(),t.TgZ(23,"div",8),t._uU(24,"Phone"),t.qZA()(),t._UZ(25,"div",9),t.TgZ(26,"div",12)(27,"i",7),t._uU(28,"check"),t.qZA(),t.TgZ(29,"div",8),t._uU(30,"Location"),t.qZA()(),t._UZ(31,"div",9),t.TgZ(32,"div",13)(33,"i",7),t._uU(34),t.qZA(),t.TgZ(35,"div",8),t._uU(36,"Ready to go"),t.qZA()()(),t.TgZ(37,"div",14)(38,"div")(39,"p",15),t._uU(40,"See what's new!"),t.qZA(),t.TgZ(41,"p"),t._uU(42,"Currently you do not have any new notifications"),t.qZA()(),t.TgZ(43,"div")(44,"p",16),t._uU(45,"Older notifications"),t.qZA(),t.TgZ(46,"p"),t._uU(47,"Currently you do not have any new notifications"),t.qZA()()()(),t.TgZ(48,"div",2)(49,"div",17)(50,"div",18)(51,"div",19)(52,"div",20)(53,"div"),t._UZ(54,"mat-progress-spinner",21),t.qZA(),t.TgZ(55,"div")(56,"div",22),t._uU(57,"Business Profile Completion"),t.qZA(),t.TgZ(58,"p",23),t._uU(59),t.qZA()()()(),t.TgZ(60,"div",19)(61,"div",20)(62,"div"),t._UZ(63,"mat-progress-spinner",21),t.qZA(),t.TgZ(64,"div")(65,"div",22),t._uU(66,"Personal Profile Completion"),t.qZA(),t.TgZ(67,"p",23),t._uU(68),t.qZA()()()()()(),t.TgZ(69,"div",17)(70,"div",18)(71,"div",19)(72,"div",22),t._uU(73,"Latest Ads Posted"),t.qZA(),t.YNc(74,U,18,10,"div",24),t.YNc(75,j,2,0,"p",25),t.qZA()()()()()(),t.YNc(76,O,2,0,"div",25),t.YNc(77,k,2,0,"div",25),t.YNc(78,J,2,0,"div",25),t.YNc(79,q,2,0,"div",25)),2&o&&(t.xp6(6),t.Oqu(null!=n.employee&&null!=n.employee.employee&&n.employee.employee.firstname?null==n.employee||null==n.employee.employee?null:n.employee.employee.firstname:"User"),t.xp6(2),t.Q6J("ngClass",n.cname?"active":""),t.xp6(6),t.Q6J("ngClass",n.cemail?"active":""),t.xp6(6),t.Q6J("ngClass",n.cphone?"active":""),t.xp6(6),t.Q6J("ngClass",n.chq?"active":""),t.xp6(6),t.Q6J("ngClass",n.formLocked?"":"active"),t.xp6(2),t.Oqu(n.formLocked?"lock_outline":"lock_open"),t.xp6(20),t.Q6J("mode",n.progressMode)("value",n.progressValue),t.xp6(5),t.hij("",n.progressValue,"%"),t.xp6(4),t.Q6J("mode",n.personalProgressMode)("value",n.personalProgressValue),t.xp6(5),t.hij("",n.personalProgressValue,"%"),t.xp6(6),t.Q6J("ngForOf",n.jobPosts),t.xp6(1),t.Q6J("ngIf",0==(null==n.jobPosts?null:n.jobPosts.length)),t.xp6(1),t.Q6J("ngIf",!n.loading&&n.serverError),t.xp6(1),t.Q6J("ngIf",n.notFound&&0==n.company.length),t.xp6(1),t.Q6J("ngIf",n.corsError),t.xp6(1),t.Q6J("ngIf",n.forbidden&&0==n.company.length||n.unexpectedError))},dependencies:[p.mk,p.sg,p.O5,m.rH,f.Ou,_.o,A.o,Z.z,C.t,p.uU,y.e],styles:[".h2-1[_ngcontent-%COMP%]{color:var(--color-text-300)}.h2-2[_ngcontent-%COMP%]{color:var(--color-text-100);font-weight:700}.notification-area[_ngcontent-%COMP%]{padding:max(20px,3vw) 0}.notification-area[_ngcontent-%COMP%]   .not-title-1[_ngcontent-%COMP%], .notification-area[_ngcontent-%COMP%]   .not-title-2[_ngcontent-%COMP%]{font-weight:450;margin-bottom:10px;font-size:18px}.notification-area[_ngcontent-%COMP%]   .not-title-1[_ngcontent-%COMP%]{color:var(--color-primary-100)}.notification-area[_ngcontent-%COMP%]   .not-title-2[_ngcontent-%COMP%]{margin-top:20px;color:var(--color-text-100)}.card-1[_ngcontent-%COMP%]{margin:10px 0;padding:20px}.card-1[_ngcontent-%COMP%]   .progress-spinner[_ngcontent-%COMP%]{width:70px!important;height:70px!important;display:flex;align-items:center;justify-content:center}.card-1[_ngcontent-%COMP%]   .title-2[_ngcontent-%COMP%]{color:var(--color-text-100);font-weight:450;transition:all .3s ease}.card-1[_ngcontent-%COMP%]   .title-2[_ngcontent-%COMP%]:hover{color:var(--color-primary-100);cursor:pointer}.c-j-progress[_ngcontent-%COMP%]{padding:0 30px}.c-j-progress[_ngcontent-%COMP%]   .check-ball[_ngcontent-%COMP%]{min-width:30px;min-height:30px;border-radius:50%;background-color:var(--color-surface-mixed-100);margin:0 5px;border:2px solid var(--color-primary-200);position:relative;padding:5px;cursor:pointer}.c-j-progress[_ngcontent-%COMP%]   .check-ball[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:none;color:#fff;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:20px}.c-j-progress[_ngcontent-%COMP%]   .check-ball[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{position:absolute;bottom:-40px;transform:translate(-50%);white-space:nowrap;color:var(--color-text-200);font-weight:450}@media screen and (max-width: 1000px){.c-j-progress[_ngcontent-%COMP%]   .check-ball[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{display:none}}.c-j-progress[_ngcontent-%COMP%]   .check-ball.active[_ngcontent-%COMP%]{background-color:var(--color-primary-200)}.c-j-progress[_ngcontent-%COMP%]   .check-ball.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:block}.c-j-progress[_ngcontent-%COMP%]   .check-ball.ready[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:block;color:var(--color-text-200)}.c-j-progress[_ngcontent-%COMP%]   .check-ball.active.ready[_ngcontent-%COMP%]{background-color:var(--color-primary-200);border:2px solid var(--color-primary-200)}.c-j-progress[_ngcontent-%COMP%]   .check-ball.active.ready[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.c-j-progress[_ngcontent-%COMP%]   .check-line[_ngcontent-%COMP%]{width:100%;height:2px;background-color:var(--color-primary-200)}@media screen and (max-width: 1000px){.c-j-progress[_ngcontent-%COMP%]{padding:0}}"]})}return i})();var D=s(4191),I=s(3951),E=s(9171),N=s(2906),L=s(3402);let d=(()=>{class i{constructor(e,o){this.cookieService=e,this.route=o}canActivate(e,o){return"0"==this.cookieService.level()||"3"==this.cookieService.level()||(this.route.navigateByUrl("/403"),!1)}static#t=this.\u0275fac=function(o){return new(o||i)(t.LFG(g.e),t.LFG(m.F0))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var u=s(5107),x=s(1896),Q=s(6613),F=s(6644),Y=s(9046),V=s(1110);const G=["table"],H=["closeModal"],$=["closeModal2"];function z(i,r){if(1&i&&(t.TgZ(0,"div",23)(1,"div",24)(2,"div",25),t._uU(3,"Applicants per Job"),t.qZA(),t._UZ(4,"app-applicants-per-job-bar-chart",26),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("jobData",e.jobApplicants)}}function R(i,r){if(1&i&&(t.TgZ(0,"div",23)(1,"div",24)(2,"div",25),t._uU(3,"Resume Download Rates"),t.qZA(),t._UZ(4,"app-resume-download-rates-chart",26),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("jobData",e.jobApplicants)}}function B(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr",48)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"span",49),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.viewCandidateProfile(a.employeeId))}),t._uU(5),t.qZA(),t._uU(6," from "),t.TgZ(7,"span",50),t._uU(8),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"span",51)(11,"a",52),t._uU(12),t.qZA()()(),t.TgZ(13,"td",53)(14,"a",54)(15,"button",55),t._uU(16,"Download CV "),t.qZA()()(),t.TgZ(17,"td",56)(18,"button",57)(19,"i",31),t._uU(20,"download"),t.qZA()()(),t.TgZ(21,"td")(22,"div",36)(23,"button",58)(24,"i",31),t._uU(25,"more_vert"),t.qZA()(),t.TgZ(26,"ul",38)(27,"li")(28,"a",40),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.viewCandidateProfile(a.employeeId))}),t._uU(29,"View"),t.qZA()(),t.TgZ(30,"li"),t._UZ(31,"hr",41),t.qZA(),t.TgZ(32,"li")(33,"a",59),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw().$implicit,c=t.oxw();return t.KtG(c.selectToInterview(l.jobId,a))}),t._uU(34,"Select to Interview"),t.qZA()(),t.TgZ(35,"li")(36,"a",59),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw().$implicit,c=t.oxw();return t.KtG(c.removeFromStack(l.jobId,a))}),t._uU(37,"Reject"),t.qZA()(),t.TgZ(38,"li"),t._UZ(39,"hr",41),t.qZA(),t.TgZ(40,"li")(41,"a",60),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw().$implicit,c=t.oxw();return t.KtG(c.openDeleteModal(l.jobId,a,"delete"))}),t._uU(42,"Delete"),t.qZA()()()()()()}if(2&i){const e=r.$implicit,o=r.index;t.xp6(2),t.Oqu(o+1),t.xp6(3),t.Oqu(e.name),t.xp6(3),t.Oqu(e.location),t.xp6(3),t.MGl("href","mailto:",e.email,"",t.LSH),t.xp6(1),t.Oqu(e.email),t.xp6(2),t.Q6J("href",e.resume,t.LSH),t.xp6(19),t.Q6J("ngClass","Selected"===e.status?"active":""),t.xp6(3),t.Q6J("ngClass","Rejected"===e.status?"active":"")}}function K(i,r){1&i&&(t.TgZ(0,"tr")(1,"td",61),t._uU(2,"No Applicants"),t.qZA()())}function X(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",27)(1,"div",24)(2,"div",28)(3,"div",25),t._uU(4," Job ID: "),t.TgZ(5,"a",29),t._uU(6),t.qZA(),t.TgZ(7,"a",30)(8,"i",31),t._uU(9,"call_made"),t.qZA()(),t._UZ(10,"i",32),t.qZA(),t.TgZ(11,"div",28)(12,"button",33),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.toggleApplicants(a))}),t.TgZ(13,"p",34),t._uU(14),t.qZA(),t.TgZ(15,"i",35),t._uU(16),t.qZA()(),t.TgZ(17,"div",36)(18,"button",37)(19,"i",31),t._uU(20,"more_horiz"),t.qZA()(),t.TgZ(21,"ul",38)(22,"li")(23,"a",39),t._uU(24,"View ad"),t.qZA()(),t.TgZ(25,"li")(26,"a",40),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.exportToCsv(a.jobId,a.applicants))}),t._uU(27,"Export"),t.qZA()(),t.TgZ(28,"li")(29,"a",40),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.analyzeJob(a.jobId))}),t._uU(30,"Analyze"),t.qZA()(),t.TgZ(31,"li"),t._UZ(32,"hr",41),t.qZA(),t.TgZ(33,"li")(34,"a",42),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.openDeleteModal(a.id,a,"deleteJob"))}),t._uU(35,"Delete"),t.qZA()()()()()(),t.TgZ(36,"table",43)(37,"thead",44)(38,"tr")(39,"th",45),t._uU(40),t.qZA(),t.TgZ(41,"th",46),t._uU(42),t.qZA()()(),t.TgZ(43,"tbody",44),t.YNc(44,B,43,8,"tr",47),t.ALo(45,"truncateComments"),t.YNc(46,K,3,0,"tr",4),t.qZA()()()()}if(2&i){const e=r.$implicit,o=t.oxw();t.xp6(5),t.MGl("routerLink","/job-details/",e.jobId,""),t.xp6(1),t.hij("",e.jobId," "),t.xp6(1),t.MGl("routerLink","/job-details/",e.jobId,""),t.xp6(7),t.hij("See ",e.showAllApplicants?"less":"all",""),t.xp6(2),t.Oqu(e.showAllApplicants?"expand":"compress"),t.xp6(7),t.MGl("routerLink","/job-details/",e.jobId,""),t.xp6(17),t.hij("Applicants (",e.applicants?e.applicants.length:0,")"),t.xp6(1),t.uIk("data-bs-whatever",e.jobId),t.xp6(1),t.hij(" Views (",e.viewers?e.viewers.length:0,") "),t.xp6(2),t.Q6J("ngForOf",t.xi3(45,11,e.applicants,e.showAllApplicants?e.applicants.length:o.maxApplicantsDisplayed)),t.xp6(2),t.Q6J("ngIf",!e.applicants)}}function W(i,r){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-failed-to-load-data"),t.qZA())}function tt(i,r){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-result-not-found"),t.qZA())}function et(i,r){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-network-error"),t.qZA())}function ot(i,r){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-forbidden"),t.qZA())}function nt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"button",64),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.viewCandidateProfile(n.employeeId))}),t.TgZ(2,"i",31),t._uU(3,"call_made"),t.qZA()()()}}function it(i,r){if(1&i&&(t.TgZ(0,"tr",48)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"div",62)(7,"p",63),t._uU(8),t.ALo(9,"timeAgo"),t.qZA(),t.YNc(10,nt,4,0,"div",4),t.qZA()()()),2&i){const e=r.$implicit,o=r.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(e.name),t.xp6(4),t.Oqu(e.date?t.lcZ(9,4,e.date):"N/A"),t.xp6(2),t.Q6J("ngIf","Guest"!=e.name)}}function at(i,r){if(1&i&&(t.TgZ(0,"table",43)(1,"tbody",44),t.YNc(2,it,11,6,"tr",47),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.viewers[0].viewers)}}function st(i,r){1&i&&(t.TgZ(0,"p"),t._uU(1,"No viewers found for this job."),t.qZA())}let lt=(()=>{class i{constructor(e,o,n,a,l){this.jobApplyService=e,this.employeeService=o,this.router=n,this.alertService=a,this.cookieService=l,this.jobApplicants=[],this.viewers=[],this.maxApplicantsDisplayed=1,this.loading=!1,this.serverError=!1,this.notFound=!1,this.forbidden=!1,this.corsError=!1,this.unexpectedError=!1}ngOnInit(){this.companyId=this.cookieService.organization(),this.fetchApplicants()}ngAfterViewInit(){document.querySelectorAll(".material-icons").forEach(a=>{a.setAttribute("translate","no")}),[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(a){return new bootstrap.Tooltip(a)});const n=document.getElementById("viewsModel");n&&n.addEventListener("show.bs.modal",a=>{const c=a.relatedTarget.getAttribute("data-bs-whatever");this.selectedJobId=c,this.fetchJobViewers(this.selectedJobId)})}fetchApplicants(){this.loading=!0,this.jobApplyService.fetchJobApplyByCompanyId(this.companyId).subscribe(e=>{this.jobApplicants=e?.map(o=>({...o,showAllApplicants:!1})),this.loading=!1},e=>{404===e.status?this.notFound=!0:500===e.status?this.serverError=!0:0===e.status?this.corsError=!0:403===e.status?this.forbidden=!0:this.unexpectedError=!0,this.loading=!1})}fetchJobViewers(e){this.jobApplyService.fetchJobViewerByJobId(e).subscribe(o=>{this.viewers=o},o=>{console.error("Error fetching job viewers",o),this.viewers=[]})}viewCandidateProfile(e){e&&(this.router.navigate(["/candidate-profile"],{queryParams:{id:e}}),setTimeout(()=>{window.location.reload()},500))}toggleApplicants(e){e.showAllApplicants=!e.showAllApplicants}analyzeJob(e){if(e){const o=this.router.serializeUrl(this.router.createUrlTree(["/job-analysis",e]));window.open(o,"_blank")}}exportToCsv(e,o){if(!o||!o.length)return void this.alertService.warningMessage("No data to export","Warning");const n=this.datasetToCsv(o);this.downloadCsv(n,`${e}-data.csv`)}datasetToCsv(e){return[Object.keys(e[0]).join(","),...e.map(a=>Object.values(a).map(l=>`"${l}"`).join(","))].join("\n")}downloadCsv(e,o){const n=new Blob([e],{type:"text/csv"}),a=window.URL.createObjectURL(n),l=document.createElement("a");l.setAttribute("href",a),l.setAttribute("download",o),l.click(),window.URL.revokeObjectURL(a)}setEmployeeJobStatus(e,o,n){null!=e&&this.employeeService.editFavJobStatus(e,{jobId:o,status:n}).subscribe(a=>{},a=>{console.error(a)})}selectToInterview(e,o){o&&this.jobApplyService.updateSingleApplicant(e,o.id,{...o,status:"Selected"}).subscribe(n=>{this.setEmployeeJobStatus(o.employeeId,e,"inprogress"),this.alertService.successMessage("Candidate Selected for Interview","Success")},n=>{this.alertService.errorMessage("Something went wrong. Please try again","Error")})}removeFromStack(e,o){o&&this.jobApplyService.updateSingleApplicant(e,o.id,{...o,status:"Rejected"}).subscribe(n=>{this.setEmployeeJobStatus(o.employeeId,e,"rejected"),this.alertService.successMessage("Candidate Rejected","Success")},n=>{this.alertService.errorMessage("Something went wrong. Please try again","Error")})}deleteSingleApplicant(e,o){o&&this.jobApplyService.deleteSingleApplicant(this.companyId,e,o.id).subscribe(n=>{this.setEmployeeJobStatus(o.employeeId,e,"deleted"),this.dismissModal("delete"),this.alertService.successMessage("Candidate Deleted","Success"),this.jobApplyService.clearCacheCompanyId(),this.fetchApplicants()},n=>{this.dismissModal("delete"),this.alertService.errorMessage("Something went wrong. Please try again","Error")})}deleteAllApplicants(e){e&&this.jobApplyService.deleteCompleteApply(e).subscribe(o=>{this.dismissModal("deleteJob"),this.alertService.successMessage("All Applicants Deleted","Success"),this.jobApplyService.clearCacheCompanyId(),this.fetchApplicants()},o=>{this.dismissModal("deleteJob"),this.alertService.errorMessage("Something went wrong. Please try again","Error")})}openDeleteModal(e,o,n){switch(n){case"delete":default:this.jobId=e,this.applicantData=o;break;case"deleteJob":this.jobId=e}}dismissModal(e){switch(e){case"delete":this.closeModal.nativeElement.click();break;case"deleteJob":this.closeModal2.nativeElement.click()}}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(b.v),t.Y36(v.G),t.Y36(m.F0),t.Y36(Q.m),t.Y36(g.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-pro-applicants-db"]],viewQuery:function(o,n){if(1&o&&(t.Gf(G,5),t.Gf(H,5),t.Gf($,5)),2&o){let a;t.iGM(a=t.CRH())&&(n.table=a.first),t.iGM(a=t.CRH())&&(n.closeModal=a.first),t.iGM(a=t.CRH())&&(n.closeModal2=a.first)}},decls:53,vars:9,consts:[[1,"container"],[1,"row"],["class","col-12 col-md-6",4,"ngIf"],["class","col-12",4,"ngFor","ngForOf"],[4,"ngIf"],["id","viewsModel","tabindex","-1","aria-labelledby","viewsModelLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","viewsModelLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["class","table table-hover table-borderless w-100",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","deleteCandidateModel","tabindex","-1","aria-labelledby","deleteCandidateModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],["id","deleteCandidateModalLabel",1,"modal-title","fs-5"],["closeModal",""],["type","button",1,"btn","btn-danger",3,"click"],["id","deleteJobModel","tabindex","-1","aria-labelledby","deleteJobModalLabel","aria-hidden","true",1,"modal","fade"],["id","deleteJobModalLabel",1,"modal-title","fs-5"],["closeModal2",""],[1,"col-12","col-md-6"],[1,"card-1"],[1,"title-1"],[3,"jobData"],[1,"col-12"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-none","d-sm-inline",3,"routerLink"],[1,"d-inline","d-sm-none",3,"routerLink"],[1,"material-icons"],["data-bs-toggle","tooltip","data-bs-placement","top","data-bs-custom-class","custom-tooltip","data-bs-title","Check the job details",1,"fa","fa-question-circle"],[1,"see-more-btn","me-1",3,"click"],[1,"d-none","d-sm-block","m-0"],[1,"d-block","d-sm-none","material-icons"],[1,"dropdown"],["data-bs-toggle","dropdown","aria-expanded","false",1,"see-more-btn","pb-0"],[1,"dropdown-menu"],[1,"dropdown-item",3,"routerLink"],[1,"dropdown-item",3,"click"],[1,"dropdown-divider"],["data-bs-toggle","modal","data-bs-target","#deleteJobModel",1,"dropdown-item","danger",3,"click"],[1,"table","table-hover","table-borderless","w-100"],[1,"w-100"],["scope","col","colspan","3"],["scope","col","data-bs-toggle","modal","data-bs-target","#viewsModel",1,"hyperlink"],["class","applicants-list-row",4,"ngFor","ngForOf"],[1,"applicants-list-row"],["data-bs-toggle","tooltip","data-bs-placement","top","data-bs-custom-class","custom-tooltip","data-bs-title","Click to view profile",1,"bold-text","hyperlink",3,"click"],[1,"bold-text"],["data-bs-toggle","tooltip","data-bs-placement","top","data-bs-custom-class","custom-tooltip","data-bs-title","Click to send email",1,"bold-text"],[1,"hyperlink",3,"href"],[1,"d-none","d-md-table-cell"],["target","_blank",3,"href"],["data-bs-toggle","tooltip","data-bs-placement","top","data-bs-custom-class","custom-tooltip","data-bs-title","Click to download CV",1,"btn-1"],[1,"d-table-cell","d-md-none"],[1,"btn-1"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn-1"],[1,"dropdown-item",3,"ngClass","click"],["data-bs-toggle","modal","data-bs-target","#deleteCandidateModel",1,"dropdown-item","danger",3,"click"],["colspan","3"],[1,"w-100","d-flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"btn-1",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,z,5,1,"div",2),t.YNc(3,R,5,1,"div",2),t.qZA(),t.TgZ(4,"div",1),t.YNc(5,X,47,14,"div",3),t.YNc(6,W,2,0,"div",4),t.YNc(7,tt,2,0,"div",4),t.YNc(8,et,2,0,"div",4),t.YNc(9,ot,2,0,"div",4),t.qZA()(),t.TgZ(10,"div",5)(11,"div",6)(12,"div",7)(13,"div",8)(14,"h1",9),t._uU(15,"Job Viewers"),t.qZA(),t._UZ(16,"button",10),t.qZA(),t.TgZ(17,"div",11),t.YNc(18,at,3,1,"table",12),t.YNc(19,st,2,0,"p",4),t.qZA(),t.TgZ(20,"div",13)(21,"button",14),t._uU(22,"Close"),t.qZA()()()()(),t.TgZ(23,"div",15)(24,"div",16)(25,"div",7)(26,"div",8)(27,"h1",17),t._uU(28,"Delete Account"),t.qZA(),t._UZ(29,"button",10,18),t.qZA(),t.TgZ(31,"div",11),t._uU(32," Are you sure you want to delete this applicant? This action cannot be undone! "),t.qZA(),t.TgZ(33,"div",13)(34,"button",14),t._uU(35,"Close"),t.qZA(),t.TgZ(36,"button",19),t.NdJ("click",function(){return n.deleteSingleApplicant(n.jobId,n.applicantData)}),t._uU(37,"Delete"),t.qZA()()()()(),t.TgZ(38,"div",20)(39,"div",16)(40,"div",7)(41,"div",8)(42,"h1",21),t._uU(43,"Delete Account"),t.qZA(),t._UZ(44,"button",10,22),t.qZA(),t.TgZ(46,"div",11),t._uU(47," Are you sure you want to delete this content? This will erase all data associated with it and this action cannot be undone! "),t.qZA(),t.TgZ(48,"div",13)(49,"button",14),t._uU(50,"Close"),t.qZA(),t.TgZ(51,"button",19),t.NdJ("click",function(){return n.deleteAllApplicants(n.jobId)}),t._uU(52,"Delete"),t.qZA()()()()()),2&o&&(t.xp6(2),t.Q6J("ngIf",n.jobApplicants&&n.jobApplicants.length>0),t.xp6(1),t.Q6J("ngIf",n.jobApplicants&&n.jobApplicants.length>0),t.xp6(2),t.Q6J("ngForOf",n.jobApplicants),t.xp6(1),t.Q6J("ngIf",!n.loading&&n.serverError),t.xp6(1),t.Q6J("ngIf",0==(null==n.jobApplicants?null:n.jobApplicants.length)),t.xp6(1),t.Q6J("ngIf",n.corsError),t.xp6(1),t.Q6J("ngIf",n.forbidden&&0==(null==n.jobApplicants?null:n.jobApplicants.length)||n.unexpectedError),t.xp6(9),t.Q6J("ngIf",n.viewers&&n.viewers.length>0),t.xp6(1),t.Q6J("ngIf",!n.viewers||0===n.viewers.length))},dependencies:[p.mk,p.sg,p.O5,m.rH,F.D,Y.h,_.o,A.o,Z.z,C.t,y.e,V.R],styles:[".card-1[_ngcontent-%COMP%]{width:100%;overflow-x:auto;margin:12px 0}.btn-1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0;font-size:18px}.applicants-list-row[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-secondary-600)}.see-more-btn[_ngcontent-%COMP%]{cursor:pointer;border:1px solid var(--color-secondary-600);border-radius:5px;background-color:var(--color-surface-mixed-200);color:var(--color-text-200);padding:2px 8px}.see-more-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0;padding:0;font-size:16px}.see-more-btn[_ngcontent-%COMP%]:hover{background-color:var(--color-surface-mixed-300)}.danger[_ngcontent-%COMP%]{color:var(--color-danger-200)}.danger[_ngcontent-%COMP%]:hover{color:var(--color-danger-100)}"]})}return i})();var rt=s(5872);const ct=[{path:"",component:M.H,children:[{path:"",redirectTo:"/pro/overview",pathMatch:"full"},{path:"overview",component:S,canActivate:[d,u.a]},{path:"personal-profile",component:D.a,canActivate:[d,u.a]},{path:"personal-profile-settings",component:I.p,canActivate:[d,u.a]},{path:"business-profile-my",component:E.x,canActivate:[d,u.a]},{path:"business-profile-settings",component:N.K,canActivate:[d,u.a]},{path:"company-jobs",component:L.Y,canActivate:[d,u.a]},{path:"applicants",component:lt,canActivate:[d,x.u]},{path:"company-analysis",component:rt.b,canActivate:[d,x.u]}],canActivate:[d,u.a]}];let dt=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#o=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(ct),m.Bz]})}return i})();var pt=s(5829),ut=s(1687),mt=s(7392),gt=s(8255),ht=s(9101),T=s(4006),vt=s(3267),bt=s(9022),ft=s(266),_t=s(259),At=s(8608);let Zt=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#o=this.\u0275inj=t.cJS({imports:[p.ez,dt,mt.Ps,gt.Tx,ht.ot,T.UX,vt.SJ,bt.To,ft.AV,f.Cq,T.u5,pt.D,ut.S,_t.p,At.v]})}return i})()}}]);